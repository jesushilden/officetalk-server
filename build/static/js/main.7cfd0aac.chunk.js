(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},145:function(e,t,n){},177:function(e,t){},179:function(e,t){},188:function(e,t,n){"use strict";n.r(t),n.d(t,"rootstore",(function(){return ve}));var r=n(1),o=n(3),s=n.n(o),a=n(34),c=n.n(a),i=(n(84),n(4)),u=n.n(i),l=n(5),d=n(7),f=n(6),m=(n(86),n(87),function(e){return Object(r.jsx)("div",{className:"dots ".concat(e.white&&"white"),children:Object(r.jsx)("div",{className:"snippet","data-title":".dot-hourglass",children:Object(r.jsx)("div",{className:"stage",children:Object(r.jsx)("div",{className:"dot-flashing"})})})})}),j=n(28);var p=function(e){var t=ve.userStore,n=ve.socketStore,s=ve.organizationStore,a=Object(o.useState)(""),c=Object(d.a)(a,2),i=c[0],f=c[1],p=Object(o.useState)(""),b=Object(d.a)(p,2),v=b[0],h=b[1],O=Object(o.useState)(!1),g=Object(d.a)(O,2),x=g[0],S=g[1],y=Object(o.useState)("user"),k=Object(d.a)(y,2),N=k[0],w=k[1];Object(o.useEffect)((function(){return document.addEventListener("keydown",z),function(){return document.removeEventListener("keydown",z)}}),[i,v]);var z=function(e){13===e.keyCode&&T()},I=function(e){return"user"===e&&"user"===N?"user-active":"organization"===e&&"organization"===N?"organization-active":""},T=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==i&&""!==v){e.next=3;break}return alert("username and password required"),e.abrupt("return");case 3:"organization"===N?E():C();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var r=Object(l.a)(u.a.mark((function r(){var o;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,S(!0),r.next=4,t.signIn(i,v);case 4:o=r.sent,n.connectToOffice(o.token,o.user.organization),e.navigateTo("office"),S(!1),r.next=16;break;case 10:r.prev=10,r.t0=r.catch(0),S(!1),h(""),alert("could not signin"),console.log(r.t0);case 16:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(){return r.apply(this,arguments)}}(),E=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S(!0),t.next=4,s.signIn(i,v);case 4:e.navigateTo("controlPanel"),S(!1),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(0),S(!1),h(""),alert("could not signin"),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"login",children:Object(r.jsxs)("div",{className:"login-card block-shadow",children:[Object(r.jsx)("div",{className:"login-card-left"}),Object(r.jsxs)("div",{className:"login-card-right",children:[Object(r.jsx)("div",{className:"login-title",children:"Sign in to OfficeTalk"}),Object(r.jsxs)("div",{className:"login-card-tabs",children:[Object(r.jsxs)("div",{className:"login-card-tabs-row",children:[Object(r.jsx)("div",{className:"login-card-tab ".concat(I("user")),onClick:function(){return w("user")},children:Object(r.jsx)("div",{className:"login-tab-text",children:"Employee"})}),Object(r.jsx)("div",{className:"login-card-tab ".concat(I("organization")),onClick:function(){return w("organization")},children:Object(r.jsx)("div",{className:"login-tab-text",children:"Organization"})})]}),Object(r.jsx)("div",{className:"tab-slider-row",children:Object(r.jsx)("span",{className:"tab-slider ".concat("organization"===N?"tab-slider-org":"tab-slider-user")})})]}),Object(r.jsxs)("div",{className:"login-input-row",children:[Object(r.jsx)("div",{className:"login-input-title"}),Object(r.jsxs)("div",{className:"".concat("organization"===N?"login-input-org":"login-input"),children:[Object(r.jsx)(j.d,{style:{fontSize:"22px",color:"#7a7d85"}}),Object(r.jsx)("input",{placeholder:"Username",value:i,onChange:function(e){return f(e.target.value)}})]})]}),Object(r.jsxs)("div",{className:"login-input-row",children:[Object(r.jsx)("div",{className:"login-input-title"}),Object(r.jsxs)("div",{className:"".concat("organization"===N?"login-input-org":"login-input"),children:[Object(r.jsx)(j.b,{style:{fontSize:"22px",color:"#7a7d85"}}),Object(r.jsx)("input",{placeholder:"Password",value:v,type:"password",onChange:function(e){return h(e.target.value)}})]})]}),Object(r.jsx)("div",{className:"login-input-row",children:Object(r.jsx)("div",{className:"OTButton login-button",style:{background:"organization"===N&&"#0466a3"},onClick:function(){return T()},children:x?Object(r.jsx)(m,{white:!0}):"Sign in"})})]})]})})},b=(n(88),n(89),n(8)),v=Object(f.a)((function(e){var t=ve.userStore,n=ve.socketStore,o=ve.officeStore;return Object(r.jsxs)("div",{className:"navbar block-shadow",children:[Object(r.jsxs)("div",{className:"navbar-logo",children:[Object(r.jsx)("img",{className:"navbar-logo-image",src:o.organization.logo}),Object(r.jsx)("div",{className:"navbar-office-name",children:o.organization.name})]}),Object(r.jsxs)("div",{className:"navbar-controls",children:[Object(r.jsx)("div",{className:"navbar-controls-border"}),Object(r.jsxs)("div",{className:"navbar-room",children:[Object(r.jsx)("div",{className:"navbar-room-name",children:function(){var e=o.users.find((function(e){return e.employeeId===t.user._id}));if(!e)return"loading...";var n=e.position.room;if(-1===n)return"Hallway";var r=o.organization.rooms.find((function(e){return e._id===n})).name;return r.length>20&&(r=r.slice(0,20)+"..."),r}()}),Object(r.jsx)("div",{className:"navbar-room-title",children:"current room"})]}),Object(r.jsxs)("div",{className:"navbar-voice",onClick:function(){return function(){var e=!t.muted;t.setMuted(e),n.emitMuted(e)}()},children:[t.muted?Object(r.jsx)(b.d,{size:22,className:"navbar-voice-microphone",color:"#F74040"}):Object(r.jsx)(b.c,{size:22,className:"navbar-voice-microphone",color:"#1CBF73"}),Object(r.jsx)("div",{className:"navbar-room-title",children:"microphone"})]}),Object(r.jsxs)("div",{className:"navbar-voice",onClick:function(){return function(){var e=!t.silenced;t.setSilenced(e),n.emitSilenced(e)}()},children:[t.silenced?Object(r.jsx)(b.i,{size:22,className:"navbar-voice-volume",color:"#F74040"}):Object(r.jsx)(b.h,{size:22,className:"navbar-voice-volume",color:"#1CBF73"}),Object(r.jsx)("div",{className:"navbar-room-title",children:"volume"})]}),Object(r.jsxs)("div",{className:"navbar-settings",onClick:function(){return e.setShowSettings(!0)},children:[Object(r.jsx)(b.e,{size:22,className:"navbar-settings-cog",color:"#404145"}),Object(r.jsx)("div",{className:"navbar-room-title",children:"settings"})]}),Object(r.jsx)("div",{className:"navbar-controls-border"})]}),Object(r.jsxs)("div",{className:"navbar-user",children:[t.user.name,Object(r.jsx)("div",{className:"navbar-user-avatar",style:{backgroundImage:"url(".concat(t.user.avatar,")")}}),Object(r.jsx)("div",{className:"navbar-sign-out",onClick:function(){return t.signOut(),n.disconnectSocket(),void e.navigateTo("login")},children:"Sign out"})]})]})})),h=(n(90),n(91),Object(f.a)((function(e){var t=ve.userStore;return Object(r.jsx)("div",{className:"message ".concat(function(){if(e.message.author._id===t.user._id)return" my-message"}()),children:Object(r.jsxs)("div",{className:"message-buble",children:[Object(r.jsx)("div",{className:"message-author",children:e.message.author.name}),Object(r.jsx)("div",{className:"message-content",children:e.message.content})]})})}))),O=Object(f.a)((function(e){var t=Object(o.useState)(""),n=Object(d.a)(t,2),s=n[0],a=n[1],c=Object(o.useState)(!1),i=Object(d.a)(c,2),f=i[0],p=i[1],b=Object(o.useState)("office"),v=Object(d.a)(b,2),O=v[0],g=v[1],x=ve.officeStore,S=ve.userStore;Object(o.useEffect)((function(){return document.addEventListener("keydown",y),function(){return document.removeEventListener("keydown",y)}}),[s]);var y=function(e){13===e.keyCode&&k()},k=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,x.sendMessage(s);case 3:t=e.sent,p(!1),a(""),t||window.alert("sending message failed");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"chat block-shadow",children:[Object(r.jsxs)("div",{className:"chat-tabs block-shadow",children:[Object(r.jsx)("div",{className:"chat-tab ".concat("office"===O&&"chat-tab-active"),onClick:function(){return g("office")},children:"Office"}),Object(r.jsx)("div",{className:"chat-tab ".concat("room"===O&&"chat-tab-active"),onClick:function(){return g("room")},children:function(){var e=x.users.find((function(e){return e.employeeId===S.user._id}));if(!e)return"loading...";var t=e.position.room;return-1===t?"Hallway":x.organization.rooms.find((function(e){return e._id===t})).name}()})]}),"room"===O&&Object(r.jsxs)("div",{className:"chat-messages-warning",children:[Object(r.jsx)(j.a,{style:{marginRight:"5px"},size:18}),"Message history is not saved in rooms."]}),Object(r.jsx)("div",{className:"chat-messages",children:("office"===O?x.organization.messages:x.roomMessages).map((function(e,t){return Object(r.jsx)(h,{message:e},t)}))}),Object(r.jsx)("div",{className:"chat-controls",children:Object(r.jsxs)("div",{className:"chat-input-container",children:[Object(r.jsx)("input",{value:s,placeholder:"Say something",onChange:function(e){return a(e.target.value)}}),Object(r.jsx)("div",{className:"chat-send",onClick:"office"===O?k:function(){p(!0),x.sendRoomMessage(s),p(!1),a("")},children:f?Object(r.jsx)(m,{}):Object(r.jsx)(j.c,{size:25})})]})})]})})),g=(n(92),n(93),Object(f.a)((function(e){var t=ve.socketStore;return Object(r.jsxs)("div",{className:"room ".concat(e.first&&"first-block"," ").concat(e.last&&"last-block"," ").concat(e.bottomRoom&&"bottom-room"),id:"room".concat(e.room._id),children:[Object(r.jsx)("div",{className:"room-top",children:e.room.name}),Object(r.jsx)("div",{className:"room-content",onClick:function(n){return function(n){var r=document.getElementById("rooms").getBoundingClientRect(),o={room:e.room._id,coordinates:{x:n.clientX-r.left,y:n.clientY-r.top}};t.emitPosition(o)}(n)}}),Object(r.jsx)("div",{className:"room-bottom",children:Object(r.jsx)("div",{className:"room-door",id:"door".concat(e.room._id)})})]})}))),x=(n(94),Object(f.a)((function(e){var t=ve.socketStore;return Object(r.jsx)("div",{className:"hallway ".concat(e.first&&"first-block"," ").concat(e.last&&"last-block"),onClick:function(e){return function(e){var n=document.getElementById("rooms").getBoundingClientRect(),r={room:-1,coordinates:{x:e.clientX-n.left,y:e.clientY-n.top}};t.emitPosition(r)}(e)}})}))),S=(n(95),Object(f.a)((function(e){var t=ve.officeStore,n=ve.userStore,o=function(){return e.user.silenced?Object(r.jsx)(b.i,{size:22,className:"avatar-voice-volume",color:"#F74040"}):!!e.user.muted&&Object(r.jsx)(b.d,{size:22,className:"avatar-voice-microphone",color:"#F74040"})},s=t.organization.employees.find((function(t){return t._id===e.user.employeeId}));return Object(r.jsxs)("div",{className:"avatar",style:{top:e.user.position.coordinates.y,left:e.user.position.coordinates.x,transition:"all ".concat(e.user.transitionTime,"s linear"),border:"".concat(e.user.employeeId===n.user._id?"2":"1","px solid ").concat(e.user.employeeId===n.user._id?"#1CBF73":"black"),backgroundImage:"url(".concat(function(){var n=t.organization.employees.find((function(t){return t._id===e.user.employeeId}));return n?n.avatar:"laoding..."}(),")")},children:[Object(r.jsx)("div",{className:"avatar-shadow block-shadow",style:{backgroundColor:o()?"#00000041":"transparent"},children:o()}),Object(r.jsx)("div",{className:"avatar-info block-shadow",children:Object(r.jsx)("div",{className:"avatar-info-name",children:s.name})})]})}))),y=(n(96),Object(f.a)((function(e){return Object(r.jsx)("div",{className:"furniture ".concat(e.furniture.type),style:{top:e.furniture.position.y,left:e.furniture.position.x,height:e.furniture.height,width:e.furniture.width}})}))),k=Object(f.a)((function(){var e=ve.officeStore,t=e.organization.rooms.length;return Object(r.jsxs)("div",{className:"rooms",id:"rooms",children:[Object(r.jsx)("div",{className:"rooms-row",children:e.organization.rooms.map((function(e,t){return t%2===0?Object(r.jsx)(g,{room:e,first:0===t}):null}))}),Object(r.jsx)(x,{}),Object(r.jsxs)("div",{className:"rooms-row",children:[e.organization.rooms.map((function(e,t){return t%2===1?Object(r.jsx)(g,{room:e,bottomRoom:!0,first:1===t}):null})),t%2===1&&Object(r.jsx)("div",{className:"room-block-empty"})]}),Object(r.jsx)("div",{className:"furniture-layer",children:e.furnitures.map((function(e){return Object(r.jsx)(y,{furniture:e},e.furnitureId)}))}),Object(r.jsx)("div",{className:"user-layer",children:e.users.map((function(e){return Object(r.jsx)(S,{user:e},e.employeeId)}))})]})})),N=(n(97),function(e){return Object(r.jsxs)("div",{className:"loading",children:[Object(r.jsx)("div",{className:"loading-text",children:"Loading Office"}),Object(r.jsx)(m,{})]})}),w=(n(98),Object(f.a)((function(e){var t=ve.officeStore,n=function(e){return t.users.find((function(t){return t.employeeId===e._id}))};return Object(r.jsxs)("div",{className:"coworkers",style:{right:e.show?"0px":"-250px"},children:[Object(r.jsx)("div",{className:"coworkers-header",children:"Co-workers"}),Object(r.jsx)("div",{className:"coworkers-header-back",onClick:function(){return e.close()},children:Object(r.jsx)(b.a,{size:25})}),Object(r.jsx)("div",{className:"coworkers-names",children:t.organization.employees.map((function(e){return Object(r.jsxs)("div",{className:"coworkers-user",children:[Object(r.jsx)("div",{className:"coworkers-user-avatar",style:{backgroundImage:"url(".concat(e.avatar,")")}}),Object(r.jsxs)("div",{className:"coworkers-user-name ".concat(n(e)&&"user-online"),children:[" ",e.name," "]})]})}))})]})}))),z=n(36),I=n(10),T=(n(99),n(100),function(e){return Object(r.jsx)("div",{className:"toggler",children:Object(r.jsxs)("label",{className:"switch",children:[Object(r.jsx)("input",{type:"checkbox",onChange:e.onChange,checked:e.value}),Object(r.jsx)("span",{className:"slider round"})]})})}),C=Object(f.a)((function(e){var t=ve.userStore,n=(ve.officeStore,Object(o.useState)("transparent")),s=Object(d.a)(n,2),a=s[0],c=s[1],i=Object(o.useState)(!1),f=Object(d.a)(i,2),j=f[0],p=f[1],v=Object(o.useState)(JSON.parse(JSON.stringify(t.user))),h=Object(d.a)(v,2),O=h[0],g=h[1],x=Object(o.useState)("0"),S=Object(d.a)(x,2),y=(S[0],S[1],Object(o.useState)(!1)),k=Object(d.a)(y,2),N=k[0],w=k[1],C=Object(o.useState)(!1),E=Object(d.a)(C,2),P=E[0],A=E[1];Object(o.useEffect)((function(){c("rgba(64, 65, 69, 0.5)")}),[]);var M=function e(t){g(Object(I.a)(Object(I.a)({},O),{},{PTKey:t.code})),w(!1),document.removeEventListener("keypress",e),j||p(!0)},_=function(e,t){j||p(!0),g(Object(I.a)(Object(I.a)({},O),{},Object(z.a)({},e,t.target.value)))},R=function(){var e=Object(l.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:return A(!0),e.next=5,t.updateUser(O);case 5:n=e.sent,A(!1),n?p(!1):alert("could not save user");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"settings-background",style:{background:a},children:Object(r.jsxs)("div",{className:"settings-modal block-shadow",children:[Object(r.jsx)("div",{className:"settings-top-row",children:Object(r.jsx)(b.j,{size:25,style:{margin:"10px",cursor:"pointer"},color:"#404145",onClick:function(){return e.setShowSettings(!1)}})}),Object(r.jsxs)("div",{className:"settings-content",children:[Object(r.jsxs)("div",{className:"settings-content-row",children:[Object(r.jsx)("div",{className:"settings-avatar",style:{backgroundImage:"url(".concat(O.avatar,")")}}),Object(r.jsx)("div",{className:"settings-Heading",children:O.name})]}),Object(r.jsx)("div",{className:"settings-content-row",children:Object(r.jsxs)("div",{className:"settings-input-row",children:[Object(r.jsx)("div",{className:"settings-input-label",children:"Avatar url"}),Object(r.jsx)("input",{value:O.avatar,onChange:function(e){return _("avatar",e)}})]})}),Object(r.jsx)("div",{className:"settings-content-row",children:Object(r.jsxs)("div",{className:"settings-input-row",children:[Object(r.jsx)("div",{className:"settings-input-label",children:"Name"}),Object(r.jsx)("input",{value:O.name,onChange:function(e){return _("name",e)}})]})}),Object(r.jsx)("div",{className:"settings-content-row",children:Object(r.jsxs)("div",{className:"settings-input-row",children:[Object(r.jsx)("div",{className:"settings-input-label",children:"Push to talk"}),Object(r.jsxs)("div",{className:"PT-row",children:[Object(r.jsx)(T,{value:O.pushToTalk,onChange:function(){return j||p(!0),g(Object(I.a)(Object(I.a)({},O),{},{pushToTalk:!O.pushToTalk})),void console.log(O)}}),Object(r.jsx)("div",{className:"change-button ".concat(!O.pushToTalk&&"change-button-disabled"),onClick:function(){return w(!0),void document.addEventListener("keydown",M)},children:"change"}),Object(r.jsx)("input",{readOnly:!0,disabled:!O.pushToTalk,value:N?"press any key":O.PTKey})]})]})})]}),Object(r.jsx)("div",{className:"settings-bottom-row",children:Object(r.jsx)("div",{className:"settings-save-button ".concat(j&&"unsaved-changes"),onClick:function(){return R()},children:P?Object(r.jsx)(m,{white:!0}):"Save"})})]})})})),E=n(77),P=n.n(E),A=Object(f.a)((function(e){var t=ve.officeStore,n=ve.userStore,s=ve.mediaStore,a=Object(o.useState)(!1),c=Object(d.a)(a,2),i=c[0],f=c[1],m=Object(o.useState)(!1),j=Object(d.a)(m,2),p=j[0],h=j[1];return Object(o.useEffect)((function(){var e=function(e){e.code==n.user.PTKey&&s.PTActive()},r=function(e){e.code==n.user.PTKey&&s.PTDeactive()};return function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchOffice(n.user.organization);case 2:n.user.pushToTalk&&s.PTDeactive();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),document.addEventListener("keydown",e),document.addEventListener("keyup",r),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}}),[t,n]),t.organization?Object(r.jsxs)("div",{className:"office",children:[Object(r.jsx)(v,{navigateTo:e.navigateTo,setShowSettings:h}),Object(r.jsxs)("div",{className:"office-body",children:[Object(r.jsx)(O,{}),Object(r.jsx)("div",{className:"office-body-scrollable",children:Object(r.jsx)(k,{})})]}),Object(r.jsxs)("div",{className:"office-toggle-coworkers block-shadow",onClick:function(){return f(!i)},children:[Object(r.jsx)(b.g,{style:{marginRight:"3px"},size:18}),"Co-workers"]}),Object(r.jsx)(w,{show:i,close:function(){return f(!1)}}),p&&Object(r.jsx)(C,{setShowSettings:h}),s.peerAudios.map((function(e){return Object(r.jsx)(P.a,{playsInline:!0,url:e.stream,playing:!0,style:{height:"0px"},height:"0px",width:"0px",volume:n.silenced?0:1})}))]}):Object(r.jsx)(N,{})})),M=(n(122),n(123),Object(f.a)((function(e){var t=ve.organizationStore;return Object(r.jsxs)("div",{className:"navbar block-shadow",children:[Object(r.jsxs)("div",{className:"navbar-logo",children:[Object(r.jsx)("img",{className:"navbar-logo-image",src:t.organization.logo}),Object(r.jsx)("div",{className:"navbar-office-name",children:t.organization.name})]}),Object(r.jsx)("div",{className:"navbar-user",children:Object(r.jsx)("div",{className:"navbar-sign-out",onClick:function(){return t.signOut(),void e.navigateTo("login")},children:"Sign out"})})]})}))),_=(n(124),Object(f.a)((function(e){var t=ve.organizationStore,n=Object(o.useState)(""),s=Object(d.a)(n,2),a=s[0],c=s[1],i=Object(o.useState)(""),f=Object(d.a)(i,2),m=f[0],j=f[1],p=Object(o.useState)(""),b=Object(d.a)(p,2),v=b[0],h=b[1],O=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createEmployee({name:a,username:m,password:v});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"employees block-shadow",children:[Object(r.jsx)("div",{className:"employee-list",children:t.organization.employees.map((function(e){return Object(r.jsxs)("div",{className:"coworkers-user",children:[Object(r.jsx)("div",{className:"coworkers-user-avatar",style:{backgroundImage:"url(".concat(e.avatar,")")}}),Object(r.jsxs)("div",{className:"coworkers-user-name",children:[" ",e," "]})]})}))}),Object(r.jsxs)("div",{className:"employee-controls",children:[Object(r.jsx)("div",{className:"login-input-row",children:Object(r.jsx)("input",{placeholder:"Full Name",value:a,onChange:function(e){return c(e.target.value)}})}),Object(r.jsx)("div",{className:"login-input-row",children:Object(r.jsx)("input",{placeholder:"Username",value:m,onChange:function(e){return j(e.target.value)}})}),Object(r.jsx)("div",{className:"login-input-row",children:Object(r.jsx)("input",{placeholder:"Password",value:v,onChange:function(e){return h(e.target.value)}})}),Object(r.jsx)("div",{className:"OTButton",onClick:function(){return O()},children:"Create Employee"})]})]})}))),R=n(23),J=(n(125),n(126),Object(f.a)((function(e){return Object(r.jsxs)("div",{className:"room ".concat(e.first&&"first-block"," ").concat(e.last&&"last-block"," ").concat(e.bottomRoom&&"bottom-room"),id:"room".concat(e.room._id),children:[Object(r.jsx)("div",{className:"room-top",children:e.room.name}),Object(r.jsx)("div",{className:"room-content",children:Object(r.jsxs)("div",{className:"room-options",children:[Object(r.jsxs)("div",{className:"room-option",children:[Object(r.jsx)(b.b,{style:{fontSize:"30px",color:"#1CBF73"}}),"Edit"]}),Object(r.jsxs)("div",{className:"room-option",children:[Object(r.jsx)(b.f,{style:{fontSize:"30px",color:"#F74040"}}),"Delete"]})]})}),Object(r.jsx)("div",{className:"room-bottom",children:Object(r.jsx)("div",{className:"room-door",id:"door".concat(e.room._id)})})]})}))),B=(n(127),Object(f.a)((function(e){return Object(r.jsx)("div",{className:"hallway ".concat(e.first&&"first-block"," ").concat(e.last&&"last-block")})}))),L=Object(f.a)((function(e){var t=ve.organizationStore,n=Object(o.useState)(JSON.parse(JSON.stringify(t.organization))),s=Object(d.a)(n,2),a=s[0],c=s[1];return Object(r.jsxs)("div",{className:"office-editor",children:[Object(r.jsx)("div",{className:"add-room block-shadow",onClick:function(){return function(){var e=[].concat(Object(R.a)(a.rooms),[{name:"new room",capacity:10}]);c(Object(I.a)(Object(I.a)({},a),{},{rooms:e}))}()},children:"Add Room"}),Object(r.jsxs)("div",{className:"rooms",id:"rooms",children:[Object(r.jsx)("div",{className:"rooms-row",children:a.rooms.map((function(e,t){return t%2===0?Object(r.jsx)(J,{room:e,first:0===t}):null}))}),Object(r.jsx)(B,{}),Object(r.jsxs)("div",{className:"rooms-row",children:[a.rooms.map((function(e,t){return t%2===1?Object(r.jsx)(J,{room:e,bottomRoom:!0,first:1===t}):null})),a.rooms.length%2===1&&Object(r.jsx)("div",{className:"room-block-empty"})]})]})]})})),U=Object(f.a)((function(e){return Object(r.jsxs)("div",{className:"controlPanel",children:[Object(r.jsx)(M,{navigateTo:e.navigateTo}),Object(r.jsxs)("div",{className:"controlPanel-body",children:[Object(r.jsx)(_,{}),Object(r.jsx)(L,{})]})]})})),F=n(9),D=n.n(F),K="/api/signin",H={signInWithToken:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post(K);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signInEmployee:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(K,"/employee"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signInOrganization:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(K,"/organization"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),SignOut:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(K,"/signout"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},W=(n(145),Object(f.a)((function(){var e=ve.userStore,t=ve.organizationStore,n=ve.socketStore,s=Object(o.useState)("login"),a=Object(d.a)(s,2),c=a[0],i=a[1];Object(o.useEffect)((function(){(function(){var r=Object(l.a)(u.a.mark((function r(){var o;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,H.signInWithToken();case 3:"employee"===(o=r.sent).user.type?(e.setUser(o.user),i("office"),n.connectToOffice(o.token,o.user.organization)):(t.setOrganization(o.user),i("controlPanel")),r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}})()()}),[e,n]);return Object(r.jsx)("div",{className:"App",children:function(){switch(c){case"login":return Object(r.jsx)(p,{navigateTo:i});case"office":return Object(r.jsx)(A,{navigateTo:i});case"controlPanel":return Object(r.jsx)(U,{navigateTo:i});default:return Object(r.jsx)(p,{navigateTo:i})}}()})}))),X=n(14),Y=n(2),q={getOrganization:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("".concat("/api/organizations","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G={sendOfficeMessage:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat("/api/messages"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=function e(t){var n=this;Object(X.a)(this,e),this.rootStore=null,this.organization=null,this.roomMessages=[],this.users=[],this.furnitures=[],this.fetchOffice=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.getOrganization(t);case 2:return r=e.sent,Object(Y.p)((function(){n.organization=r})),console.log("current organization:",n.organization),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setEmployeeStates=function(e){Object(Y.p)((function(){n.users=e}))},this.addEmployeeState=function(e){n.users=n.users.concat(e)},this.removeEmployeeState=function(e){n.users=n.users.filter((function(t){return t.employeeId!==e.employeeId}))},this.sendRoomMessage=function(e){n.rootStore.socketStore.emitRoomMessage(e)},this.sendMessage=function(){var e=Object(l.a)(u.a.mark((function e(t){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.sendOfficeMessage({content:t});case 3:if(!(r=e.sent)){e.next=7;break}return n.organization.messages.find((function(e){return e._id===r._id}))||((o=JSON.parse(JSON.stringify(n.organization))).messages.unshift(r),Object(Y.p)((function(){n.organization=o}))),e.abrupt("return",r);case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),this.receiveMessage=function(e){if(!n.organization.messages.find((function(t){return t._id===e._id}))){var t=JSON.parse(JSON.stringify(n.organization));t.messages.unshift(e),Object(Y.p)((function(){n.organization=t}))}},this.muteEmployee=function(e,t){var r=JSON.parse(JSON.stringify(n.users));r.find((function(t){return t.employeeId===e})).muted=t,Object(Y.p)((function(){n.users=r}))},this.silenceEmployee=function(e,t){var r=JSON.parse(JSON.stringify(n.users));r.find((function(t){return t.employeeId===e})).silenced=t,Object(Y.p)((function(){n.users=r}))},this.changePosition=function(e,t,r){var o=JSON.parse(JSON.stringify(n.users));o.find((function(t){return t.employeeId===e})).position=t,o.find((function(t){return t.employeeId===e})).transitionTime=r,Object(Y.p)((function(){n.users=o}))},this.receiveRoomMessage=function(e){n.roomMessages.find((function(t){return t._id===e._id}))||Object(Y.p)((function(){n.roomMessages=[e].concat(n.roomMessages)}))},this.clearRoomChat=function(){Object(Y.p)((function(){n.roomMessages=[]}))},this.rootStore=t,Object(Y.n)(this,{rootStore:Y.o,organization:Y.o,users:Y.o,roomMessages:Y.o,furnitures:Y.o,receiveMessage:Y.f,changePosition:Y.f,sendMessage:Y.f,fetchOffice:Y.f,setEmployeeStates:Y.f,addEmployeeState:Y.f,removeEmployeeState:Y.f,receiveRoomMessage:Y.f,sendRoomMessage:Y.f,clearRoomChat:Y.f})},V=n(78),Z=function(e){return new Promise((function(t){return setTimeout(t,e)}))},$=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r,o){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=ve.officeStore.users.find((function(e){return e.employeeId===o})),r===s.position.room){e.next=16;break}if(-1!==r){e.next=7;break}return e.next=5,ee(s,t,n,r,o);case 5:e.next=14;break;case 7:if(-1!==s.position.room){e.next=12;break}return e.next=10,te(s,t,n,r,o);case 10:e.next=14;break;case 12:return e.next=14,ne(s,t,n,r);case 14:e.next=18;break;case 16:return e.next=18,re(o,t,n,r);case 18:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),ee=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r,o,s){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe(s,t.position.room),e.next=3,Z(1e3*a);case 3:t.employeeId===ve.userStore.user._id&&ve.mediaStore.endAllConnections(),t.employeeId===ve.userStore.user._id&&ve.officeStore.clearRoomChat(),re(s,n,r,o),t.employeeId===ve.userStore.user._id&&ve.mediaStore.connectToPeers();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,o,s){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r,o){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=oe(t.employeeId,o),e.next=3,Z(1e3*s);case 3:t.employeeId===ve.userStore.user._id&&ve.mediaStore.endAllConnections(),t.employeeId===ve.userStore.user._id&&ve.officeStore.clearRoomChat(),re(t.employeeId,n,r,o),t.employeeId===ve.userStore.user._id&&ve.mediaStore.connectToPeers();case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r,o){var s,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=oe(t.employeeId,t.position.room),e.next=3,Z(1e3*s);case 3:return t.employeeId===ve.userStore.user._id&&ve.mediaStore.endAllConnections(),t.employeeId===ve.userStore.user._id&&ve.officeStore.clearRoomChat(),a=oe(t.employeeId,o),e.next=8,Z(1e3*a);case 8:t.employeeId===ve.userStore.user._id&&ve.officeStore.clearRoomChat(),re(t.employeeId,n,r,o),t.employeeId===ve.userStore.user._id&&ve.mediaStore.connectToPeers();case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),re=function(e,t,n,r){var o=ve.officeStore.users.find((function(t){return t.employeeId===e})),s=t,a=n,c=se(o.position.coordinates.x,o.position.coordinates.y,s,a);return ve.officeStore.changePosition(e,{room:r,coordinates:{x:s,y:a}},c),c},oe=function(e,t){var n=ve.officeStore.users.find((function(t){return t.employeeId===e})),r=document.getElementById("door".concat(t)),o=r.offsetLeft+30,s=r.offsetTop,a=se(n.position.coordinates.x,n.position.coordinates.y,o,s);return ve.officeStore.changePosition(e,{room:n.position.room,coordinates:{x:o,y:s}},a),a},se=function(e,t,n,r){var o=Math.abs(e-n),s=Math.abs(t-r);return.01*Math.hypot(o,s)},ae=$,ce="/api/sockets",ie={updateState:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.put("".concat(ce,"/employeeState"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addRoomMessage:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(ce,"/roomMessage"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendSignal:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(ce,"/sendSignal"),{employeeId:t,signal:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),returnSignal:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(ce,"/returnSignal"),{employeeId:t,signal:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},ue=function e(t){var n=this;Object(X.a)(this,e),this.rootStore=null,this.socket=null,this.connectToOffice=function(e,t){n.socket=V.io.connect("/",{auth:{token:e}}),n.socket.on("message",(function(e){n.rootStore.officeStore.receiveMessage(e)})),n.socket.on("initialData",(function(e){var t=e.employeeStates,r=e.iceServers;n.rootStore.officeStore.setEmployeeStates(t),n.rootStore.mediaStore.initializeMedia(r)})),n.socket.on("addEmployeeState",(function(e){n.rootStore.officeStore.addEmployeeState(e)})),n.socket.on("removeEmployeeState",(function(e){n.rootStore.officeStore.removeEmployeeState(e)})),n.socket.on("updateEmployeeState",(function(e){var t=ve.officeStore.users.find((function(t){return t.employeeId===e.employeeId}));t&&(t.muted!==e.muted&&ve.officeStore.muteEmployee(e.employeeId,e.muted),t.silenced!==e.silenced&&ve.officeStore.silenceEmployee(e.employeeId,e.silenced),t.position!==e.position&&ae(e.position.coordinates.x,e.position.coordinates.y,e.position.room,e.employeeId))})),n.socket.on("roomMessage",(function(e){n.rootStore.officeStore.receiveRoomMessage(e)}))},this.disconnectSocket=function(){n.socket.disconnect()},this.emitPosition=function(e){var t=ve.userStore.user._id,r=JSON.parse(JSON.stringify(n.rootStore.officeStore.users.find((function(e){return e.employeeId===t}))));ie.updateState(Object(I.a)(Object(I.a)({},r),{},{position:e}))},this.emitMuted=function(e){var t=ve.userStore.user._id,r=JSON.parse(JSON.stringify(n.rootStore.officeStore.users.find((function(e){return e.employeeId===t}))));ie.updateState(Object(I.a)(Object(I.a)({},r),{},{muted:e}))},this.emitSilenced=function(e){var t=ve.userStore.user._id,r=JSON.parse(JSON.stringify(n.rootStore.officeStore.users.find((function(e){return e.employeeId===t}))));ie.updateState(Object(I.a)(Object(I.a)({},r),{},{silenced:e}))},this.emitRoomMessage=function(e){ie.addRoomMessage({content:e})},this.emitStartCall=function(e){ie.startCall(e)},this.rootStore=t,Object(Y.n)(this,{rootStore:Y.o,socket:Y.o,connectToOffice:Y.f,disconnectSocket:Y.f,emitPosition:Y.f,emitMuted:Y.f,emitSilenced:Y.f})},le="/api/employees",de={updateEmployee:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.put("".concat(le,"/").concat(t._id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createEmployee:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("".concat(le,"/"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},fe=function e(t){var n=this;Object(X.a)(this,e),this.rootStore=null,this.user=null,this.muted=!1,this.silenced=!1,this.signIn=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.signInEmployee({username:t,password:r});case 2:return o=e.sent,n.user=o.user,console.log("current user:",n.user),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.setUser=function(e){Object(Y.p)((function(){n.user=e}))},this.signOut=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.SignOut();case 2:n.rootStore.mediaStore.endAllConnections(),Object(Y.p)((function(){n.user=null}));case 4:case"end":return e.stop()}}),e)}))),this.updateUser=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.updateEmployee(t);case 3:return r=e.sent,n.user=r,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),this.setMuted=function(e){n.muted=e,e?n.rootStore.mediaStore.removeAudioStreams():n.rootStore.mediaStore.addAudioStreams()},this.setSilenced=function(e){n.silenced=e},this.rootStore=t,Object(Y.n)(this,{rootStore:Y.o,user:Y.o,muted:Y.o,silenced:Y.o,signIn:Y.f,setUser:Y.f,signOut:Y.f,updateUser:Y.f,setMuted:Y.f,setSilenced:Y.f})},me=n(42),je=n.n(me),pe=function e(t){var n=this;Object(X.a)(this,e),this.rootStore=null,this.stream=null,this.peers=[],this.peerAudios=[],this.iceServers=null,this.PTActivated=!0,this.initializeMedia=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.iceServers=t,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){n.stream=e,n.connectToPeers(),n.rootStore.socketStore.socket.on("sendSignal",(function(e){var t=e.signal,r=e.employeeId;console.log("sendSignal received"),n.addPeer(t,r)})),n.rootStore.socketStore.socket.on("returnSignal",(function(e){var t=e.signal,r=e.employeeId;console.log("returnSignal received");var o=n.peers.find((function(e){return e.employeeId===r}));o&&o.peer.signal(t)}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.connectToPeers=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.getRoomUsers(),console.log("The users in the room: "),t.forEach((function(e){console.log(e.employeeId)})),t.length>1&&t.forEach((function(e){e.employeeId!==n.rootStore.userStore.user._id&&(console.log("createPeer"),n.createPeer(e.employeeId,n.iceServers))}));case 4:case"end":return e.stop()}}),e)}))),this.addPeer=function(e,t){var r=new je.a({initiator:!1,trickle:!1,stream:n.stream,config:{iceServers:n.iceServers}});r.signal(e),(n.rootStore.userStore.muted||n.rootStore.userStore.user.pushToTalk&&!n.PTActivated)&&(r.streams[0].getAudioTracks()[0].enabled=!1),r.on("signal",(function(e){console.log("returnSignal sent"),ie.returnSignal(t,e)})),r.on("stream",(function(e){console.log("stream received"),Object(Y.p)((function(){n.peerAudios=[].concat(Object(R.a)(n.peerAudios),[{stream:e,employeeId:t}])}))})),r.on("close",(function(){console.log("connection closed"),n.endPeerConnection(t)})),r.on("error",(function(e){console.log("Peer error: ",e)})),Object(Y.p)((function(){n.peers=[].concat(Object(R.a)(n.peers),[{peer:r,employeeId:t}])}))},this.createPeer=function(e){var t=new je.a({initiator:!0,trickle:!1,stream:n.stream,config:{iceServers:n.iceServers}});(n.rootStore.userStore.muted||n.rootStore.userStore.user.pushToTalk&&!n.PTActivated)&&(t.streams[0].getAudioTracks()[0].enabled=!1),t.on("signal",(function(t){console.log("sendSignal sent"),ie.sendSignal(e,t)})),t.on("stream",(function(t){console.log("stream received"),Object(Y.p)((function(){n.peerAudios=[].concat(Object(R.a)(n.peerAudios),[{stream:t,employeeId:e}])}))})),t.on("close",(function(){console.log("connection closed"),n.endPeerConnection(e)})),t.on("error",(function(e){console.log("Peer error: ",e)})),Object(Y.p)((function(){n.peers=[].concat(Object(R.a)(n.peers),[{peer:t,employeeId:e}])}))},this.getRoomUsers=function(){var e=n.rootStore.userStore.user._id,t=n.rootStore.officeStore.users.find((function(t){return t.employeeId===e})).position.room;return n.rootStore.officeStore.users.filter((function(e){return e.position.room===t}))},this.endAllConnections=function(){console.log("ending all connections"),n.peers.forEach((function(e){return e.peer.destroy()})),Object(Y.p)((function(){n.peers=[],n.peerAudios=[]}))},this.endPeerConnection=function(e){var t=n.peers.filter((function(t){return t.employeeId!==e})),r=n.peerAudios.filter((function(t){return t.employeeId!==e}));Object(Y.p)((function(){n.peers=t,n.peerAudios=r}))},this.removeAudioStreams=function(){n.peers.forEach((function(e){return console.log(e.peer.streams[0].getAudioTracks()[0])})),n.peers.forEach((function(e){return e.peer.streams[0].getAudioTracks()[0].enabled=!1}))},this.addAudioStreams=function(){n.PTActivated&&n.peers.forEach((function(e){return e.peer.streams[0].getAudioTracks()[0].enabled=!0}))},this.PTActive=function(){n.rootStore.userStore.muted||n.PTActivated||(console.log("PT activated"),n.peers.forEach((function(e){return e.peer.streams[0].getAudioTracks()[0].enabled=!0})),n.PTActivated=!0)},this.PTDeactive=function(){n.rootStore.userStore.muted||(console.log("PT deactivated"),n.peers.forEach((function(e){return e.peer.streams[0].getAudioTracks()[0].enabled=!1})),n.PTActivated=!1)},this.rootStore=t,Object(Y.n)(this,{rootStore:Y.o,stream:Y.o,peerAudios:Y.o,peers:Y.o,iceServers:Y.o,connectToPeers:Y.f,endAllConnections:Y.f,initializeMedia:Y.f,removeAudioStreams:Y.f,addAudioStreams:Y.f,PTActive:Y.f,PTDeactive:Y.f})},be=function e(t){var n=this;Object(X.a)(this,e),this.rootStore=null,this.organization=null,this.signIn=function(){var e=Object(l.a)(u.a.mark((function e(t,r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.signInOrganization({username:t,password:r});case 2:return o=e.sent,Object(Y.p)((function(){n.organization=o.user,o.user.office&&(n.office=o.user.office)})),console.log("current organization:",n.organization),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.setOrganization=function(e){Object(Y.p)((function(){n.organization=e}))},this.signOut=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.SignOut();case 2:Object(Y.p)((function(){n.organization=null}));case 3:case"end":return e.stop()}}),e)}))),this.createEmployee=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.createEmployee(n.organization._id,t);case 2:r=e.sent,Object(Y.p)((function(){console.log("RESPONSE: ",r)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.rootStore=t,Object(Y.n)(this,{rootStore:Y.o,organization:Y.o,signIn:Y.f,setOrganization:Y.f,signOut:Y.f,createEmployee:Y.f})},ve=new function e(){Object(X.a)(this,e),this.officeStore=new Q(this),this.userStore=new fe(this),this.socketStore=new ue(this),this.mediaStore=new pe(this),this.organizationStore=new be(this),Object(Y.m)(this)};c.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(W,{})}),document.getElementById("root"))},84:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[188,1,2]]]);
//# sourceMappingURL=main.7cfd0aac.chunk.js.map